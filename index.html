<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="styles.css">
	</head>
	<script src="mattvbackground.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
	<body>
		<canvas id="canvas"></canvas>
		<div class="page">
			<nav>
				<ul class="nav">
					<li class="left"><a href="./index.html">Home</a></li>
					<li class="left"><a href="./index.html?nav=resume">Resume</a></li>
					<li class="left"><a href="./index.html?nav=cube">Cube Builder</a></li>
					<li class="left"><a href="./index.html?nav=gravity">Gravity</a></li>
					<li class="right"><a href="./index.html?nav=signin">Sign In</a></li>
				</ul>
			</nav>
			<div id="content">
				<div hidden id="home_content">
					<?prettify lang=html?>
					<pre id="quine" class="prettyprint">
					</pre>
				</div>
				<div hidden id="cube_content">
					<iframe src="./cubeview/cubeview.html" width="100%;" height="450px;"></iframe>
				</div>
				<div hidden id="gravity_content">
					<iframe src="./CanvasGravity/gravity.html" width="820px;" height="620px;"></iframe>
				</div>
				<div hidden id="contact_content">contact</div>
				<div hidden id="signin_content">signin</div>
				<div hidden id="register_content">register</div>
			</div>
		</div>
		<script>//<![CDATA[
			new MattVBackground(document.getElementById("canvas"))

			// GET query string
			const urlParams = new URLSearchParams(window.location.search);
			let content = document.getElementById("content")

			// display content appropriate to nav selection
			if (urlParams.has('nav')) {
				document.getElementById("home_content").hidden = true;
				switch(urlParams.get('nav')) {
					case 'resume':
						content.innerHTML = `<embed id="resume" src="https://drive.google.com/viewerng/viewer?embedded=true&url=https://matt-vaughan.com/resume.pdf" width="100%" height="875" >`	
						break;
					case 'cube':
						content.innerHTML = document.getElementById("cube_content").innerHTML
						break;
					case 'gravity':
						content.innerHTML = document.getElementById("gravity_content").innerHTML
						break;
					case 'signin':
						content.innerHTML = document.getElementById("signin_content").innerHTML	
						break;
				} 
			} else {
				(function () {
				function htmlEscape(s) {
					return s
					.replace(/&/g, '&amp;')
					.replace(/</g, '&lt;')
					.replace(/>/g, '&gt;');
				}

				// this page's own source code
				var quineHtml = htmlEscape(
					'<!DOCTYPE html>\n<html>\n' +
					document.documentElement.innerHTML +
					'\n<\/html>\n');

				// Highlight the operative parts:
				quineHtml = quineHtml.replace(
					/&lt;script src[\s\S]*?&gt;&lt;\/script&gt;|&lt;!--\?[\s\S]*?--&gt;|&lt;pre\b[\s\S]*?&lt;\/pre&gt;/g,
					'<span class="operative">$&<\/span>');

				// insert into PRE
				document.getElementById("quine").innerHTML = quineHtml;
				})();
				//]]>

				document.getElementById("home_content").hidden = false;
			}
		</script>
	</body>
</html>